<!DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8"></meta>
 <title>LocoMotion</title>
 <link href="style.css" rel="stylesheet" type="text/css"/>
</head>

<body onLoad="window.doLaunch()">

  <script type="module">
  import * as P from "./punctual.js";
  window.doLaunch = function () {
    var cvs = document.getElementById('canvas');
    window.punctual = new P.Punctual();
    window.requestAnimationFrame(animate);
  }
  function animate() {
    window.requestAnimationFrame(animate);
    window.punctual.preRender({canDraw: true});
    window.punctual.render({zone:0});
    window.punctual.postRender({canDraw: true});
  }
  window.doEval = function () {
    var t = document.getElementById("editorArea").value;
    var r = window.punctual.define({zone:0,text:t,time:0}); // time is placeholder obviously
    document.getElementById('errors').textContent = r.error;
  }
  window.addEventListener('keydown', function (e) {
    e = e || window.event;
    if(e.shiftKey && e.key=="Enter") {
      e.preventDefault();
      window.doEval();
    }
  });

  </script>

  <div id="canvasDiv"><canvas id="canvas"></canvas></div>
  <div class="editorAndStatus">
    <div class="editor">
<textarea class="editorArea" id="editorArea">
-- punctual 0.5      
</textarea>
    </div>
    <div class="status">
      <!-- <button onClick="doEval()">eval</button> -->
      <span id="errors"></span>
    </div>
  </div>
</body>

</html>

